<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.58.2" />

  <title>networking &middot; diydeveloper.dev</title>

  
  <link rel="stylesheet" href="/css/bootstrap-social.css">
  <link rel="stylesheet" href="/css/blog.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Special+Elite" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Vollkorn" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,700" rel="stylesheet" type="text/css">

  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,400i,700,700i,900,900i|Fira+Sans:400,400i,700,700i,900,900i|Quicksand:300,400,500,700" rel="stylesheet" />
  <link href="/css/prism.css" rel="stylesheet" />
  <script src="/js/jquery.min.js"></script>
  <script src='/js/prism.js' type='text/javascript'></script>
  <script src='/js/stackblur.min.js' type='text/javascript'></script>


  
  <link rel="stylesheet" href="/css/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
  <script type="text/javascript" src="/js/jquery.fancybox.pack.js?v=2.1.5"></script>
  <script type='text/javascript'>
   $(document).ready(function() {
      $(".fancybox").fancybox({
      helpers : {
          title: {
              type: 'inside',
              position: 'top'
          }
      },
      nextEffect: 'fade',
      prevEffect: 'fade'});
   });
  </script>

</head>


<body>

<header id="page-header">
    <div class="header title-header">
        <h1><a href="/">DIY Developer</a></h1>
        <h2>Power tools, software, 3d printing</h2>
    </div>
</header>

<section class="content">
  <div class="pure-g post-index">
    <div class="pure-u-1">
      <div class="title-center">
          <h1><i class="fa fa-tags fa-fw"></i> networking</h1>
      </div>
    </div>
    
    <article class="blog-post">
    <div class="post-header">
        <h2><a href="/diy/2014/06/30/mount-a-network-cabinet/">Mount a network cabinet</a></h2>
    </div>
    <div class="post-meta">

  
  

  
    
      
      
      
    
  
  <div class="article-meta">
      
      <div class="social-buttons"> 
            <a class="btn btn-social-icon btn-twitter" href="http://twitter.com/share?url=https%3a%2f%2fdiydeveloper.dev%2fdiy%2f2014%2f06%2f30%2fmount-a-network-cabinet%2f&amp;text=Mount%20a%20network%20cabinet&amp;via=dfrencham"><i class="fa fa-twitter"></i></a>
            <a class="btn btn-social-icon btn-facebook" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fdiydeveloper.dev%2fdiy%2f2014%2f06%2f30%2fmount-a-network-cabinet%2f&amp;t=Mount%20a%20network%20cabinet"><i class="fa fa-facebook"></i></a>
            <a class="btn btn-social-icon btn-linkedin" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fdiydeveloper.dev%2fdiy%2f2014%2f06%2f30%2fmount-a-network-cabinet%2f"><i class="fa fa-linkedin"></i></a>  
            <a class="btn btn-social-icon btn-reddit" href="https://reddit.com/submit?url=https%3a%2f%2fdiydeveloper.dev%2fdiy%2f2014%2f06%2f30%2fmount-a-network-cabinet%2f&title=Mount%20a%20network%20cabinet"><i class="fa fa-reddit"></i></a>      
     </div>
     <div class="tags">
          <div class="taxonomy-tag">             
              <i class="fa fa-calendar fa-fw"></i>            
              <time>30 Jun 2014</time> 
          </div>
          
            
            
              
                <div class="taxonomy-tag">             
                    <i class="fa fa-tags fa-fw"></i>            
                    <a class="post-taxonomy-tag" href="https://diydeveloper.devtags/networking">networking</a>
                </div>
              
                <div class="taxonomy-tag">             
                    <i class="fa fa-tags fa-fw"></i>            
                    <a class="post-taxonomy-tag" href="https://diydeveloper.devtags/build-it">build-it</a>
                </div>
              
            
          
      </div>
      
  </div>

</div>
    <p>My home network is a little&hellip; disorganised. I have 2 or 3 switches residing around the house, PoE, WiFi, and various cobbled together partially wired sections. Time to get organised. Time to get a rack!</p>

<h2 id="i-like-racks">I like racks</h2>

<p>If you haven&rsquo;t seen <a href="http://www.4cabling.com.au">4Cabling</a>, go have a look. They sell all sorts of networking gear at reasonable prices and they deliver <strong>fast</strong>. They shipped a rack to me in 24 hours for $10 shipping. I have no idea how that is even possible, given that I&rsquo;m two states away.</p>

<p>I purchased a shiny new 6RU wall mount rack, a patch panel, a 24 port GigE switch, and 24 patch cables that are too short.</p>

<p>To mount a rack, here are the tools you will need:</p>

<ul>
<li>drill</li>
<li>level</li>
<li>hole saw (maybe)</li>
</ul>

<p>You will also need timber screws or timber bolts - with enough strength to hold the rack to the wall.</p>

<h3 id="installing-the-cabinet">Installing the cabinet</h3>

<ul class="howto">
<li>
<a class="fancybox" rel="group" href="/images/rack00.jpg" title="Nice rack. Can I touch it?"><img src="/images/sm_rack00.jpg" class="img-thumbnail" alt="A picture of a rack" /></a>
<h4>1</h4>
First things first. Measure up the network cabinet. Have a look at all the access points. You need to decide where the cables are going to come in. From the top, side, or base. Remove the cover over that panel. The front door will (hopefully) mount on either side.
</li>

<li>
<a class="fancybox" rel="group" href="/images/rack01.jpg" title="Ikea shelving. The more shelves I add, the less organised I get."><img src="/images/sm_rack01.jpg" class="img-thumbnail" alt="A picture of my laundry" /></a>
<h4>2</h4>
Find a nice place to mount it. Check that you have space to open the door.
</li>
<li>
<a class="fancybox" rel="group" href="/images/rack02.jpg" title="Check you have enough space!"><img src="/images/sm_rack02.jpg" class="img-thumbnail" alt="Tape measure against wall" /></a>
<h4>3</h4>
Double check those measurements. Go back to the rack and look for some mounting holes in the back. Those holes should be in a removeable mounting panel. Remove the panel.
</li>
<li>
<a class="fancybox" rel="group" href="/images/rack03.jpg" title="Mounting plate positioning"><img src="/images/sm_rack03.jpg" class="img-thumbnail" alt="Mounting plate against wall" /></a>
<h4>4</h4>
Go back to your installation location. Use a stud finder to find two wall studs (unless you have brick). Mark the centre of the studs. The stud spacing should match up to 2 of the holes in the mounting panel. Match the holes to the studs, and mark the holes on the wall. Hold a level up and ensure the holes are level (you may need to adjust the holes up or down a bit.)
</li>
<li>
<a class="fancybox" rel="group" href="/images/rack09.jpg" title="Broken drill bit :("><img src="/images/sm_rack09.jpg" class="img-thumbnail" alt="Stupid broken drill bit" /></a>
<h4>:(</h4>
I broke a drill bit, then I had to use a bigger drill bit to drill it out.
</li>
<li>
<a class="fancybox" rel="group" href="/images/rack04.jpg" title="timber bolt"><img src="/images/sm_rack04.jpg" class="img-thumbnail" alt="Picture of a very attractive bolt" /></a>
<h4>5</h4>
This is the type of bolts I am using to mount the cabinet. They are high tensile galvanised wood bolts. To use these, first pre-drill a hole <b>the same width</b> as the timber bolt. The hole should be slightly deeper than the length of the bolt. If you don't do this, it will be very hard to drive in.
</li>
<li>
<a class="fancybox" rel="group" href="/images/rack05.jpg" title="Do NOT use a drill/driver to put those bolts in. I snapped the heads off of 3 when I wall mounted my TV. I am a slow learner."><img src="/images/sm_rack05.jpg" class="img-thumbnail" alt="A rachet doing rachety things" /></a>
<h4>6</h4>
Use a rachet to drive the bolt in (going through the mount plate and into the stud). Put some petroleum jelly on it first, so it is easier to drive in. Make sure you go slowly and carefully. If you go too fast, you will snap the head of the bolt off. It is easier to snap than you might think.
</li>
<li>
<a class="fancybox" rel="group" href="/images/rack06.jpg" title="a levelled mounting plate"><img src="/images/sm_rack06.jpg" class="img-thumbnail" alt="a levelled mounting plate" /></a>
<h4>7</h4>
At this point, check the mount plate is level. You may need to loosen one of the bolts and adjust up or down slightly, then re-tighten. If it is not level, your cabinet will not be level.
</li>
<li>
<a class="fancybox" rel="group" href="/images/rack07.jpg" title="a hole saw? a hole saw. What did the hole see?"><img src="/images/sm_rack07.jpg" class="img-thumbnail" alt="a hole saw" /></a>
<h4>8</h4>
Remember how I asked if you want side or top entry cables? That's important now. You will need to drill a hole with a hole saw in either the ceiling or wall for the cabling to run through.
</li>
<li>
<a class="fancybox" rel="group" href="/images/rack08.jpg" title="Storm water pipe makes great conduit if you live in a ghetto like I should."><img src="/images/sm_rack08.jpg" class="img-thumbnail" alt="ghetto conduit" /></a>
<h4>9</h4>
I used 90mm PVC (storm water!) pipe. I put a 90 degree bend in the ceiling (from the top!) and attached 2m of pipe. This means I can easily feed cable through from inside the ceiling. It's a bit neater to use proper conduit, if you have it on hand.
</li>
<li>
<a class="fancybox" rel="group" href="/images/rack10.jpg" title="Who's that good looking dude?"><img src="/images/sm_rack10.jpg" class="img-thumbnail" alt="a cabinet with the reflection of a developer" /></a>
<h4>10</h4>
Now lift the cabinet up into place. I found that I had to bend the metal mounting tabs on the mount plate <i>outwards</i> slightly. You can probably remove the door to lighten the load a little. Once done, re-mount and open the door and put a couple of screws back into the mount plate. Stand back and admire yourself..*cough*.. admire your work.
</li>
</ul>

<p><em>All done!</em> The rest is easy. Just install a cat6 patch panel, gigabit switch, and run cable through your walls. No worries mate.</p>
    <p>/eof</p>
</article>
    
    <article class="blog-post">
    <div class="post-header">
        <h2><a href="/tech/2014/06/12/check-your-multicast-settings/">Chromecast issues? Check your Multicast settings</a></h2>
    </div>
    <div class="post-meta">

  
  

  
     
      
      
      
    
  
  <div class="article-meta">
      
      <div class="social-buttons"> 
            <a class="btn btn-social-icon btn-twitter" href="http://twitter.com/share?url=https%3a%2f%2fdiydeveloper.dev%2ftech%2f2014%2f06%2f12%2fcheck-your-multicast-settings%2f&amp;text=Chromecast%20issues%3f%20Check%20your%20Multicast%20settings&amp;via=dfrencham"><i class="fa fa-twitter"></i></a>
            <a class="btn btn-social-icon btn-facebook" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fdiydeveloper.dev%2ftech%2f2014%2f06%2f12%2fcheck-your-multicast-settings%2f&amp;t=Chromecast%20issues%3f%20Check%20your%20Multicast%20settings"><i class="fa fa-facebook"></i></a>
            <a class="btn btn-social-icon btn-linkedin" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fdiydeveloper.dev%2ftech%2f2014%2f06%2f12%2fcheck-your-multicast-settings%2f"><i class="fa fa-linkedin"></i></a>  
            <a class="btn btn-social-icon btn-reddit" href="https://reddit.com/submit?url=https%3a%2f%2fdiydeveloper.dev%2ftech%2f2014%2f06%2f12%2fcheck-your-multicast-settings%2f&title=Chromecast%20issues%3f%20Check%20your%20Multicast%20settings"><i class="fa fa-reddit"></i></a>      
     </div>
     <div class="tags">
          <div class="taxonomy-tag">             
              <i class="fa fa-calendar fa-fw"></i>            
              <time>12 Jun 2014</time> 
          </div>
          
            
            
              
                <div class="taxonomy-tag">             
                    <i class="fa fa-tags fa-fw"></i>            
                    <a class="post-taxonomy-tag" href="https://diydeveloper.devtags/networking">networking</a>
                </div>
              
                <div class="taxonomy-tag">             
                    <i class="fa fa-tags fa-fw"></i>            
                    <a class="post-taxonomy-tag" href="https://diydeveloper.devtags/chromecast">chromecast</a>
                </div>
              
                <div class="taxonomy-tag">             
                    <i class="fa fa-tags fa-fw"></i>            
                    <a class="post-taxonomy-tag" href="https://diydeveloper.devtags/tech-guide">tech-guide</a>
                </div>
              
            
          
      </div>
      
  </div>

</div>
    <p>I&rsquo;ve had network gremlins for a few months now. Sometimes my WeMo switches are visible, sometimes not. Chromecast is the same. My devices were screaming for attention, but my router wasn&rsquo;t listening. Lets look at Multicasting (and Broadcasting).</p>

<h2 id="what-is-broadcasting">What is broadcasting?</h2>

<p><img class="img-thumbnail inline textwrap-left" src="/images/broadcast.png" alt="Broadcast" />At a basic level, a network broadcast is when a device spams the whole network with a message.</p>

<blockquote>
  <p>In computer networking, broadcasting refers to transmitting a packet that will be received by every device on the network.</p>
  <footer><cite title="Source Title">Wikipedia</cite></footer>
</blockquote>

<p>Why would a device want to do this? Well, lots of reasons.</p>

<p>Take your home network connection for example. When your laptop connects to your home network, it broadcasts a DHCP request. Your router replies with an ipaddress and off you go.</p>

<p>You should also be aware of Multicast.</p>

<h2 id="what-is-multicasting">What is multicasting?</h2>

<p><img class="img-thumbnail inline textwrap-left" src="/images/multicast.png" alt="Multicast" />Multicast is similar to broadcast - we are sending a message to multiple nodes, but in this case, we are sending it to a subset of nodes (rather than spamming everyone).</p>

<p>As far as your router is concerned, broadcasts and multicasts are very similar. If you have an issue with one, you probably have an issue with the other.</p>

<p><br /></p>

<h2 id="the-symptoms-of-broken-multicasting">The symptoms of broken Multicasting</h2>

<p>In my case, I had two issues that indicated multicasts were not configured properly.</p>

<p>The first issue was my Belkin WeMo light switch and power socket. These are network aware IP devices that can be switched on or off with my phone. I could control them via 3g, but not over my LAN. This seemed odd, but makes sense when you learn how the WeMo devices work.</p>

<div class="img-thumbnail inline textwrap-left" style="margin-right:30px;"><img src="/images/cloud.jpg" alt="Broadcast" /><br /><i>Discovery Protocol in action</i></div>

<p>When away from your home network, WeMo devices register through Belkin&rsquo;s cloud service. They then accept push messages. So, your phone sends a &ldquo;light on&rdquo; command to the WeMo cloud, the WeMo cloud then sends a push message to the switch.</p>

<p>On your home network, the cloud is not used - uPnP kicks in. Your phone sends a multicast discovery message along the lines of <strong>&ldquo;HEY! any WeMo devices out there?&rdquo;</strong>. The WeMo devices pick that up,  kick off a handshake with your phone, and away you go.</p>

<p>If the initial discovery multicast message is not received, the WeMo devices are not found.</p>

<p>My second issue was with my ChromeCast. Sometimes it would be discovered by my phone, sometimes not. ChromeCast works by using the DIscovery And Launch (<a href="http://en.wikipedia.org/wiki/DIscovery_And_Launch">DIAL</a>) protocol. The discovery part uses Simple Service Discovery Protocol (<a href="http://en.wikipedia.org/wiki/Simple_Service_Discovery_Protocol">SSDP</a>), sending a multicast message to the address 239.255.255.250. The ChromeCast response is a uPnP UDP message, containing address details for the ChromeCast device.</p>

<p>If the initial Multicast packet is not being sent/received, the ChromeCast will never respond - meaning my phone will never find it.</p>

<p>My router had some multicasting options configured poorly, however uPnP was turned on. This resulted in intermittent discovery of the ChromeCast.</p>

<p>As an interesting side note, the DIAL protocol was co-developed by Netflix and YouTube (with help from Sony and Samsung). My buddy Jase did something similar with discoverable sound hardware a few years back - but he didn&rsquo;t give it a cool name, so no one heard about it.</p>

<h2 id="suggested-router-settings">Suggested Router Settings</h2>

<p>The settings below are the suggested settings for working multicasting on your home WiFi network.</p>

<h3 id="ap-isolation">AP Isolation</h3>

<p><strong>Possible settings</strong></p>

<ul>
<li>on / <strong>off</strong></li>
</ul>

<p><strong>Description:</strong> If turned on, this will prevent wireless clients from messaging each other directly. This means no fileshares, no network games, no printing, no nothing. All you can talk to is the router. Unless you are an Internet Cafe, this should be off.</p>

<h3 id="igmp-snooping">IGMP Snooping</h3>

<p><strong>Possible settings</strong></p>

<ul>
<li><strong>on</strong> / off</li>
</ul>

<p><strong>Description:</strong> As per Wikipedia: <em>is the process of listening to Internet Group Management Protocol (IGMP) network traffic. The feature allows a network switch to listen in on the IGMP conversation between hosts and routers. By listening to these conversations the switch maintains a map of which links need which IP multicast streams. Multicasts may be filtered from the links which do not need them and thus controls which ports receive specific multicast traffic.</em></p>

<p>Many multicast capable media devices are known to need this setting turned on. This includes the AppleTV, and ChromeCast.</p>

<h3 id="multicast-rate">Multicast Rate</h3>

<p><strong>Possible settings</strong></p>

<ul>
<li>Auto</li>
<li>HTMIX - (speed)</li>
<li>OFDM - (speed)</li>
<li>CCK - (speed)</li>
</ul>

<p><strong>Suggested setting</strong></p>

<ul>
<li>HTMIX <sup>130</sup>&frasl;<sub>144</sub></li>
</ul>

<p><strong>Description:</strong></p>

<p>The first part refers to the <em>modulation</em>, the second part the speed. Each modulation is (generally) aligned with a Wireless speed/standard:</p>

<ul>
<li>CCK - 802.11b</li>
<li>OFDM - 802.11g</li>
<li>CCK - 802.11b</li>
</ul>

<p>The speed portion is (min Mbit/s)/(max MBit/sec). The general rule is that the minimum should be a little higher than the maximum bandwidth your streaming device will use. Note that the higher setting you use here, the more you will restrict your WiFi range.</p>

<h3 id="beacon-interval">Beacon Interval</h3>

<p><strong>Possible settings</strong></p>

<ul>
<li>Beacon Interval: (number)</li>
</ul>

<p><strong>Suggested setting</strong></p>

<ul>
<li>50ms</li>
</ul>

<p><strong>Description:</strong></p>

<p>Your router periodically sends a &ldquo;Beacon&rdquo; packet. This does several things:</p>

<ol>
<li>Includes a Date/Time used by devices to syncronise</li>
<li>Advertises the network capabilities</li>
<li>Announce the SSD and presence of the WiFi router.</li>
<li>Acts as a &ldquo;heartbeat&rdquo; packet</li>
</ol>

<p>Generally, decreasing the beacon setting will mean more administrative overhead for your network, but you gain increased reliability. Some devices (Apple TV again) require 50ms or less to work.</p>

<h2 id="summary">Summary</h2>

<p>After the changes have been made above, you will probably need to restart your router. After I made the above changes, I found all WeMo devices were visible and the ChromeCast icon was now appearing in NetFlix. Happy days!</p>

<h2 id="references">References</h2>

<ul>
<li><a href="http://www.dd-wrt.com/wiki/index.php/Advanced_wireless_settings">DD-WRT page on advanced wiresless settings</a></li>
<li><a href="http://en.wikipedia.org/wiki/Broadcasting_(networking)">Wikipedia Broadcasting</a></li>
<li><a href="http://en.wikipedia.org/wiki/Multicast">Wikipedia Multicasting</a></li>
<li><a href="http://www.cisco.com/c/en/us/td/docs/wireless/controller/technotes/7-6/chromecastDG76/ChromecastDG76.html">Cisco Chromecast setup whitepaper</a></li>
<li><a href="http://computers-solution.com/how-chromecast-works-chromecast-protocol-described/">How Chromecast works</a></li>
</ul>

<p>The multicast and broadcast images on this page are sourced from <a href="http://www.wikipedia.org">Wikipedia</a>.</p>
    <p>/eof</p>
</article>
    
  </div>
</div>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48772536-1', 'auto');
  ga('send', 'pageview');

</script>



<footer class="page-footer">
    <div class="pure-menu">
        <div class="pure-u-1 pure-u-md-1-2 pure-u-lg-1-2">
            
              <a class="icon-link" href="/"><i class='fa fa-home fa-fw'></i>Home</a>
            
              <a class="icon-link" href="/archive/"><i class='fa fa-list fa-fw'></i>Archive</a>
            
              <a class="icon-link" href="/about/"><i class='fa fa-user fa-fw'></i>About</a>
            
            <a class="icon-link" href="https://github.com/dfrencham" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    
        </div>
        <div class="pure-u-1 pure-u-md-1-2 pure-u-lg-1-2">
            <div>
  <div class="small-print">
    <small></small>
  </div>
  <div class="small-print">
    <small>
      Built with <a href="https://gohugo.io/" target="_blank">Hugo</a>
    </small>
  </div>
</div>

        </div>
    </div>
</footer>
</body>
</html>
