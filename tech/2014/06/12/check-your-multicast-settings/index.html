<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.58.2" />

  <title>Chromecast issues? Check your Multicast settings &middot; DIYDeveloper.io</title>

  
  <link rel="stylesheet" href="/css/bootstrap-social.css">
  <link rel="stylesheet" href="/css/blog.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Special+Elite" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Vollkorn" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,700" rel="stylesheet" type="text/css">

  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,400i,700,700i,900,900i|Fira+Sans:400,400i,700,700i,900,900i|Quicksand:300,400,500,700" rel="stylesheet" />
  <link href="/css/prism.css" rel="stylesheet" />
  <script src="/js/jquery.min.js"></script>
  <script src='/js/prism.js' type='text/javascript'></script>
  <script src='/js/stackblur.min.js' type='text/javascript'></script>


  
  <link rel="stylesheet" href="/css/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
  <script type="text/javascript" src="/js/jquery.fancybox.pack.js?v=2.1.5"></script>
  <script type='text/javascript'>
   $(document).ready(function() {
      $(".fancybox").fancybox({
      helpers : {
          title: {
              type: 'inside',
              position: 'top'
          }
      },
      nextEffect: 'fade',
      prevEffect: 'fade'});
   });
  </script>

</head>


<body>

<header id="page-header">
    <div class="header title-header">
        <h1><a href="/">DIY Developer</a></h1>
        <h2>Power tools, software, 3d printing</h2>
    </div>
</header>

<section class="content">
  <div class="left-col">
    <div class="post-index single-post">
      <article class="blog-post">
    <div class="post-header">
        <h2><a href="/tech/2014/06/12/check-your-multicast-settings/">Chromecast issues? Check your Multicast settings</a></h2>
    </div>
    <div class="post-meta">

  
  

  
     
      
      
      
    
  
  <div class="article-meta">
      
      <div class="social-buttons"> 
            <a class="btn btn-social-icon btn-twitter" href="http://twitter.com/share?url=https%3a%2f%2fdiydeveloper.io%2ftech%2f2014%2f06%2f12%2fcheck-your-multicast-settings%2f&amp;text=Chromecast%20issues%3f%20Check%20your%20Multicast%20settings&amp;via=dfrencham"><i class="fa fa-twitter"></i></a>
            <a class="btn btn-social-icon btn-facebook" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fdiydeveloper.io%2ftech%2f2014%2f06%2f12%2fcheck-your-multicast-settings%2f&amp;t=Chromecast%20issues%3f%20Check%20your%20Multicast%20settings"><i class="fa fa-facebook"></i></a>
            <a class="btn btn-social-icon btn-linkedin" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fdiydeveloper.io%2ftech%2f2014%2f06%2f12%2fcheck-your-multicast-settings%2f"><i class="fa fa-linkedin"></i></a>  
            <a class="btn btn-social-icon btn-reddit" href="https://reddit.com/submit?url=https%3a%2f%2fdiydeveloper.io%2ftech%2f2014%2f06%2f12%2fcheck-your-multicast-settings%2f&title=Chromecast%20issues%3f%20Check%20your%20Multicast%20settings"><i class="fa fa-reddit"></i></a>      
     </div>
     <div class="tags">
          <div class="taxonomy-tag">             
              <i class="fa fa-calendar fa-fw"></i>            
              <time>12 Jun 2014</time> 
          </div>
          
            
            
              
                <div class="taxonomy-tag">             
                    <i class="fa fa-tags fa-fw"></i>            
                    <a class="post-taxonomy-tag" href="https://diydeveloper.iotags/networking">networking</a>
                </div>
              
                <div class="taxonomy-tag">             
                    <i class="fa fa-tags fa-fw"></i>            
                    <a class="post-taxonomy-tag" href="https://diydeveloper.iotags/chromecast">chromecast</a>
                </div>
              
                <div class="taxonomy-tag">             
                    <i class="fa fa-tags fa-fw"></i>            
                    <a class="post-taxonomy-tag" href="https://diydeveloper.iotags/tech-guide">tech-guide</a>
                </div>
              
            
          
      </div>
      
  </div>

</div>
    <p>I&rsquo;ve had network gremlins for a few months now. Sometimes my WeMo switches are visible, sometimes not. Chromecast is the same. My devices were screaming for attention, but my router wasn&rsquo;t listening. Lets look at Multicasting (and Broadcasting).</p>

<h2 id="what-is-broadcasting">What is broadcasting?</h2>

<p><img class="img-thumbnail inline textwrap-left" src="/images/broadcast.png" alt="Broadcast" />At a basic level, a network broadcast is when a device spams the whole network with a message.</p>

<blockquote>
  <p>In computer networking, broadcasting refers to transmitting a packet that will be received by every device on the network.</p>
  <footer><cite title="Source Title">Wikipedia</cite></footer>
</blockquote>

<p>Why would a device want to do this? Well, lots of reasons.</p>

<p>Take your home network connection for example. When your laptop connects to your home network, it broadcasts a DHCP request. Your router replies with an ipaddress and off you go.</p>

<p>You should also be aware of Multicast.</p>

<h2 id="what-is-multicasting">What is multicasting?</h2>

<p><img class="img-thumbnail inline textwrap-left" src="/images/multicast.png" alt="Multicast" />Multicast is similar to broadcast - we are sending a message to multiple nodes, but in this case, we are sending it to a subset of nodes (rather than spamming everyone).</p>

<p>As far as your router is concerned, broadcasts and multicasts are very similar. If you have an issue with one, you probably have an issue with the other.</p>

<p><br /></p>

<h2 id="the-symptoms-of-broken-multicasting">The symptoms of broken Multicasting</h2>

<p>In my case, I had two issues that indicated multicasts were not configured properly.</p>

<p>The first issue was my Belkin WeMo light switch and power socket. These are network aware IP devices that can be switched on or off with my phone. I could control them via 3g, but not over my LAN. This seemed odd, but makes sense when you learn how the WeMo devices work.</p>

<div class="img-thumbnail inline textwrap-left" style="margin-right:30px;"><img src="/images/cloud.jpg" alt="Broadcast" /><br /><i>Discovery Protocol in action</i></div>

<p>When away from your home network, WeMo devices register through Belkin&rsquo;s cloud service. They then accept push messages. So, your phone sends a &ldquo;light on&rdquo; command to the WeMo cloud, the WeMo cloud then sends a push message to the switch.</p>

<p>On your home network, the cloud is not used - uPnP kicks in. Your phone sends a multicast discovery message along the lines of <strong>&ldquo;HEY! any WeMo devices out there?&rdquo;</strong>. The WeMo devices pick that up,  kick off a handshake with your phone, and away you go.</p>

<p>If the initial discovery multicast message is not received, the WeMo devices are not found.</p>

<p>My second issue was with my ChromeCast. Sometimes it would be discovered by my phone, sometimes not. ChromeCast works by using the DIscovery And Launch (<a href="http://en.wikipedia.org/wiki/DIscovery_And_Launch">DIAL</a>) protocol. The discovery part uses Simple Service Discovery Protocol (<a href="http://en.wikipedia.org/wiki/Simple_Service_Discovery_Protocol">SSDP</a>), sending a multicast message to the address 239.255.255.250. The ChromeCast response is a uPnP UDP message, containing address details for the ChromeCast device.</p>

<p>If the initial Multicast packet is not being sent/received, the ChromeCast will never respond - meaning my phone will never find it.</p>

<p>My router had some multicasting options configured poorly, however uPnP was turned on. This resulted in intermittent discovery of the ChromeCast.</p>

<p>As an interesting side note, the DIAL protocol was co-developed by Netflix and YouTube (with help from Sony and Samsung). My buddy Jase did something similar with discoverable sound hardware a few years back - but he didn&rsquo;t give it a cool name, so no one heard about it.</p>

<h2 id="suggested-router-settings">Suggested Router Settings</h2>

<p>The settings below are the suggested settings for working multicasting on your home WiFi network.</p>

<h3 id="ap-isolation">AP Isolation</h3>

<p><strong>Possible settings</strong></p>

<ul>
<li>on / <strong>off</strong></li>
</ul>

<p><strong>Description:</strong> If turned on, this will prevent wireless clients from messaging each other directly. This means no fileshares, no network games, no printing, no nothing. All you can talk to is the router. Unless you are an Internet Cafe, this should be off.</p>

<h3 id="igmp-snooping">IGMP Snooping</h3>

<p><strong>Possible settings</strong></p>

<ul>
<li><strong>on</strong> / off</li>
</ul>

<p><strong>Description:</strong> As per Wikipedia: <em>is the process of listening to Internet Group Management Protocol (IGMP) network traffic. The feature allows a network switch to listen in on the IGMP conversation between hosts and routers. By listening to these conversations the switch maintains a map of which links need which IP multicast streams. Multicasts may be filtered from the links which do not need them and thus controls which ports receive specific multicast traffic.</em></p>

<p>Many multicast capable media devices are known to need this setting turned on. This includes the AppleTV, and ChromeCast.</p>

<h3 id="multicast-rate">Multicast Rate</h3>

<p><strong>Possible settings</strong></p>

<ul>
<li>Auto</li>
<li>HTMIX - (speed)</li>
<li>OFDM - (speed)</li>
<li>CCK - (speed)</li>
</ul>

<p><strong>Suggested setting</strong></p>

<ul>
<li>HTMIX <sup>130</sup>&frasl;<sub>144</sub></li>
</ul>

<p><strong>Description:</strong></p>

<p>The first part refers to the <em>modulation</em>, the second part the speed. Each modulation is (generally) aligned with a Wireless speed/standard:</p>

<ul>
<li>CCK - 802.11b</li>
<li>OFDM - 802.11g</li>
<li>CCK - 802.11b</li>
</ul>

<p>The speed portion is (min Mbit/s)/(max MBit/sec). The general rule is that the minimum should be a little higher than the maximum bandwidth your streaming device will use. Note that the higher setting you use here, the more you will restrict your WiFi range.</p>

<h3 id="beacon-interval">Beacon Interval</h3>

<p><strong>Possible settings</strong></p>

<ul>
<li>Beacon Interval: (number)</li>
</ul>

<p><strong>Suggested setting</strong></p>

<ul>
<li>50ms</li>
</ul>

<p><strong>Description:</strong></p>

<p>Your router periodically sends a &ldquo;Beacon&rdquo; packet. This does several things:</p>

<ol>
<li>Includes a Date/Time used by devices to syncronise</li>
<li>Advertises the network capabilities</li>
<li>Announce the SSD and presence of the WiFi router.</li>
<li>Acts as a &ldquo;heartbeat&rdquo; packet</li>
</ol>

<p>Generally, decreasing the beacon setting will mean more administrative overhead for your network, but you gain increased reliability. Some devices (Apple TV again) require 50ms or less to work.</p>

<h2 id="summary">Summary</h2>

<p>After the changes have been made above, you will probably need to restart your router. After I made the above changes, I found all WeMo devices were visible and the ChromeCast icon was now appearing in NetFlix. Happy days!</p>

<h2 id="references">References</h2>

<ul>
<li><a href="http://www.dd-wrt.com/wiki/index.php/Advanced_wireless_settings">DD-WRT page on advanced wiresless settings</a></li>
<li><a href="http://en.wikipedia.org/wiki/Broadcasting_(networking)">Wikipedia Broadcasting</a></li>
<li><a href="http://en.wikipedia.org/wiki/Multicast">Wikipedia Multicasting</a></li>
<li><a href="http://www.cisco.com/c/en/us/td/docs/wireless/controller/technotes/7-6/chromecastDG76/ChromecastDG76.html">Cisco Chromecast setup whitepaper</a></li>
<li><a href="http://computers-solution.com/how-chromecast-works-chromecast-protocol-described/">How Chromecast works</a></li>
</ul>

<p>The multicast and broadcast images on this page are sourced from <a href="http://www.wikipedia.org">Wikipedia</a>.</p>
    <p>/eof</p>
</article>
      
<div class="prev-next-post">
  <div style="text-align: left;">
    
    <a href="https://diydeveloper.io/tech/2014/06/07/how-i-got-burned-win8/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div>
    
    <nav class="prev">
      <a href="https://diydeveloper.io/tech/2014/06/07/how-i-got-burned-win8/">How I Got Burned Today - Windows 8 Install</a>
    </nav>
    
  </div>
  <div>
    
      <div style="display: inline-block; padding: 0 10px;"> | </div>
    
  </div>
  <div>
    
    <nav class="next">
      <a href="https://diydeveloper.io/tech/2014/06/20/angular-in-5-minutes/">Get Angular Running in 5 minutes </a>
    </nav>
    
  </div>
  <div style="text-align: right;">
    
    <a href="https://diydeveloper.io/tech/2014/06/20/angular-in-5-minutes/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>


    </div>
  </div>
  <div class="right-col">
      <h3>About</h3>
<div>
Danny Frencham is a software developer, based in Brisbane Australia.
</div>
<h3>Projects</h3>
<ul style="list-style: none; text-align: left; padding-left: 10px;">
<li><a href="https://github.com/dfrencham/vscode-chutzpahrunner">vscode-chutzpahrunner</a></li>
<li><a href="https://github.com/dfrencham/rad-gate">rad-gate</a></li>
</ul>
<h3>Tags</h3>
<div class="tagcloud">

    
    
    
    
      
      
       
        
          
          <a href="/tags/meter" class="tag-cloud-0" data-count=2>meter</a>
        
      
    
      
      
       
        
          
          <a href="/tags/build-it" class="tag-cloud-1" data-count=6>build-it</a>
        
      
    
      
      
       
        
          
          <a href="/tags/argh" class="tag-cloud-0" data-count=2>argh</a>
        
      
    
      
      
       
        
          
          <a href="/tags/fix-it" class="tag-cloud-2" data-count=10>fix-it</a>
        
      
    
      
      
       
        
          
          <a href="/tags/css" class="tag-cloud-1" data-count=5>css</a>
        
      
    
      
      
       
        
          
          <a href="/tags/how-I-got-burned-today" class="tag-cloud-0" data-count=2>how-I-got-burned-today</a>
        
      
    
      
      
       
        
          
          <a href="/tags/plumbing" class="tag-cloud-1" data-count=3>plumbing</a>
        
      
    
      
      
       
        
          
          <a href="/tags/solar" class="tag-cloud-1" data-count=3>solar</a>
        
      
    
      
      
       
        
          
          <a href="/tags/family" class="tag-cloud-0" data-count=2>family</a>
        
      
    
      
      
       
        
          
          <a href="/tags/visual-studio" class="tag-cloud-0" data-count=2>visual-studio</a>
        
      
    
      
      
       
        
          
          <a href="/tags/networking" class="tag-cloud-0" data-count=2>networking</a>
        
      
    
      
      
       
        
          
          <a href="/tags/bathroom" class="tag-cloud-0" data-count=2>bathroom</a>
        
      
    
      
      
       
        
          
          <a href="/tags/single-page-app" class="tag-cloud-0" data-count=2>single-page-app</a>
        
      
    
      
      
       
        
          
          <a href="/tags/programming" class="tag-cloud-4" data-count=17>programming</a>
        
      
    
      
      
       
        
          
          <a href="/tags/raspberry-pi" class="tag-cloud-0" data-count=2>raspberry-pi</a>
        
      
    
      
      
       
        
          
          <a href="/tags/blogging" class="tag-cloud-1" data-count=4>blogging</a>
        
      
    
      
      
       
        
          
          <a href="/tags/tools" class="tag-cloud-0" data-count=2>tools</a>
        
      
    
      
      
       
        
          
          <a href="/tags/review" class="tag-cloud-1" data-count=5>review</a>
        
      
    
      
      
       
        
          
          <a href="/tags/chromecast" class="tag-cloud-0" data-count=2>chromecast</a>
        
      
    
      
      
       
        
          
          <a href="/tags/ocr" class="tag-cloud-0" data-count=2>ocr</a>
        
      
    
      
      
       
        
          
          <a href="/tags/javascript" class="tag-cloud-2" data-count=10>javascript</a>
        
      
    
      
      
       
        
          
          <a href="/tags/aurelia" class="tag-cloud-0" data-count=2>aurelia</a>
        
      
    
      
      
       
        
          
          <a href="/tags/demolition" class="tag-cloud-1" data-count=3>demolition</a>
        
      
    
      
      
       
        
          
          <a href="/tags/C#" class="tag-cloud-1" data-count=3>C#</a>
        
      
    
      
      
       
        
          
          <a href="/tags/phone" class="tag-cloud-1" data-count=3>phone</a>
        
      
    
      
      
       
        
          
          <a href="/tags/tech-guide" class="tag-cloud-2" data-count=8>tech-guide</a>
        
      
    
      
      
       
        
          
          <a href="/tags/flooring" class="tag-cloud-0" data-count=2>flooring</a>
        
      
    
      
      
       
        
          
          <a href="/tags/automation" class="tag-cloud-0" data-count=2>automation</a>
        
      
    
      
      
       
        
          
          <a href="/tags/html" class="tag-cloud-0" data-count=2>html</a>
        
      
    
      
      
       
        
          
          <a href="/tags/door" class="tag-cloud-0" data-count=2>door</a>
        
      
    
      
      
       
        
          
          <a href="/tags/development" class="tag-cloud-1" data-count=7>development</a>
        
      
    
      
      
       
        
          
          <a href="/tags/dotnet" class="tag-cloud-1" data-count=3>dotnet</a>
        
      
    
      
      
       
        
          
          <a href="/tags/reno" class="tag-cloud-0" data-count=2>reno</a>
        
      
    
      
      
       
        
          
          <a href="/tags/ikea" class="tag-cloud-1" data-count=3>ikea</a>
        
      
    

</div>
  </div>
  
</section>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48772536-1', 'auto');
  ga('send', 'pageview');

</script>



<footer class="page-footer">
    <div class="pure-menu">
        <div class="pure-u-1 pure-u-md-1-2 pure-u-lg-1-2">
            
              <a class="icon-link" href="/"><i class='fa fa-home fa-fw'></i>Home</a>
            
              <a class="icon-link" href="/archive/"><i class='fa fa-list fa-fw'></i>Archive</a>
            
              <a class="icon-link" href="/about/"><i class='fa fa-user fa-fw'></i>About</a>
            
            <a class="icon-link" href="https://github.com/dfrencham" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    
        </div>
        <div class="pure-u-1 pure-u-md-1-2 pure-u-lg-1-2">
            <div>
  <div class="small-print">
    <small></small>
  </div>
  <div class="small-print">
    <small>
      Built with <a href="https://gohugo.io/" target="_blank">Hugo</a>
    </small>
  </div>
</div>

        </div>
    </div>
</footer>
</body>
</html>

